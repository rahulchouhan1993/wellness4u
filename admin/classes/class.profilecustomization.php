<?phpinclude_once("class.paging.php");include_once("class.admin.php");class ProfileCustomization extends Admin{    public function getAllProfileCustomizationCategories($search,$status)    {        $my_DBH = new mysqlConnection();        $DBH = $my_DBH->raw_handle();        $DBH->beginTransaction();        $admin_id = $_SESSION['admin_id'];        $edit_action_id = '273';        $delete_action_id = '274';        $edit = $this->chkValidActionPermission($admin_id,$edit_action_id);        $delete = $this->chkValidActionPermission($admin_id,$delete_action_id);        if($search == '')        {            $str_sql_search = '';        }        else        {            $str_sql_search = " AND `prct_cat` LIKE '%".$search."%' ";        }        if($status == '')        {            $str_sql_status = '';        }        else        {            $str_sql_status = " AND `prct_cat_status` = '".$status."'";        }        $sql = "SELECT * FROM `tblprofilecustomcategories` WHERE `prct_cat_deleted` = '0' ".$str_sql_search." ".$str_sql_status." ORDER BY prct_cat_id DESC ";          $STH = $DBH->prepare($sql);           $STH->execute();        $total_records = $STH->rowCount();        $record_per_page = 100;        $scroll = 5;        $page = new Page();         $page->set_page_data($_SERVER['PHP_SELF'],$total_records,$record_per_page,$scroll,true,true,true);        $page->set_link_parameter("Class = paging");        $page->set_qry_string($str="mode=profile_customization_categories");        $STH = $DBH->prepare($page->get_limit_query($sql));        $STH->execute();        $output = '';		        if($STH->rowCount() > 0)        {            if( isset($_GET['page']) && is_numeric($_GET['page']) && $_GET['page'] > 0 )            {                $i = $page->start + 1;            }            else            {                $i = 1;            }            while($row = $STH->fetch(PDO::FETCH_ASSOC))            {                if($row['prct_cat_status'] == '1')                {                    $status = 'Active';                }                else                {                    $status = 'Inactive';                }                $output .= '<tr class="manage-row">';                $output .= '<td height="30" align="center">'.$i.'</td>';                $output .= '<td height="30" align="center"><strong>'.stripslashes($row['prct_cat']).'</strong></td>';                $output .= '<td height="30" align="center"><strong>'.$status.'</strong></td>';                $output .= '<td height="30" align="center">';                if($edit) {                $output .= '<a href="index.php?mode=edit_profile_customization_category&id='.$row['prct_cat_id'].'" ><img src = "images/edit.gif" border="0"></a>';                }                $output .= '</td>';                //$output .= '<td height="30" align="center">';                //if($delete) {                //$output .= '<a href=\'javascript:fn_confirmdelete("Category","sql/delprofilecategorycategory.php?id='.$row['prct_cat_id'].'")\' ><img src = "images/del.gif" border="0" ></a>';                //}                //$output .= '</td>';                $output .= '</tr>';                //$output .= '<tr class="manage-row" height="30"><td colspan="5" align="center">&nbsp;</td></tr>';                $i++;            }        }        else        {            $output = '<tr class="manage-row" height="30"><td colspan="5" align="center">NO RECORDS FOUND</td></tr>';        }        $page->get_page_nav();        return $output;    }        public function chkIfProfileCustomizationCategoryAlreadyExists($prct_cat)    {        $my_DBH = new mysqlConnection();        $DBH = $my_DBH->raw_handle();        $DBH->beginTransaction();        $return = false;        $sql = "SELECT * FROM `tblprofilecustomcategories` WHERE `prct_cat` = '".addslashes($prct_cat)."' AND `prct_cat_deleted` = '0' ";          $STH = $DBH->prepare($sql);           $STH->execute();        if($STH->rowCount() > 0)        {            $return = true;        }        return $return;    }    public function chkIfProfileCustomizationCategoryAlreadyExists_Edit($prct_cat,$prct_cat_id)    {        $my_DBH = new mysqlConnection();        $DBH = $my_DBH->raw_handle();        $DBH->beginTransaction();        $return = false;        $sql = "SELECT * FROM `tblprofilecustomcategories` WHERE `prct_cat` = '".addslashes($prct_cat)."' AND `prct_cat_id` != '".$prct_cat_id."' AND `prct_cat_deleted` = '0' ";          $STH = $DBH->prepare($sql);           $STH->execute();        if($STH->rowCount() > 0)        {            $return = true;        }        return $return;    }    public function addProfileCustomizationCategory($prct_cat)    {        $my_DBH = new mysqlConnection();        $DBH = $my_DBH->raw_handle();        $DBH->beginTransaction();        $return = false;        $sql = "INSERT INTO `tblprofilecustomcategories` (`prct_cat`,`prct_cat_status`) VALUES ('".addslashes($prct_cat)."','1')";          $STH = $DBH->prepare($sql);          $STH->execute();        if($STH->rowCount() > 0)		{			$return = true;		}		return $return;    }    public function updateProfileCustomizationCategory($prct_cat_id,$prct_cat,$prct_cat_status)    {        $my_DBH = new mysqlConnection();        $DBH = $my_DBH->raw_handle();        $DBH->beginTransaction();         $return=false;        $upd_sql = "UPDATE `tblprofilecustomcategories` SET `prct_cat` = '".addslashes($prct_cat)."', `prct_cat_status` = '".addslashes($prct_cat_status)."' WHERE `prct_cat_id` = '".$prct_cat_id."'";         $STH = $DBH->prepare($upd_sql);          $STH->execute();          if($STH->rowCount() > 0)		{			$return = true;		}		return $return;    }    public function getProfileCustomizationCategoryDetails($prct_cat_id)    {        $my_DBH = new mysqlConnection();        $DBH = $my_DBH->raw_handle();        $DBH->beginTransaction();        $prct_cat = '';        $prct_cat_status = '';        $sql = "SELECT * FROM `tblprofilecustomcategories` WHERE `prct_cat_id` = '".$prct_cat_id."'";          $STH = $DBH->prepare($sql);           $STH->execute();        if($STH->rowCount() > 0)        {            $row = $STH->fetch(PDO::FETCH_ASSOC);            $prct_cat = stripslashes($row['prct_cat']);            $prct_cat_status = stripslashes($row['prct_cat_status']);        }        return array($prct_cat,$prct_cat_status);    }        public function getAllProUserServicesOptions($pro_user_service)    {        $my_DBH = new mysqlConnection();        $DBH = $my_DBH->raw_handle();        $DBH->beginTransaction();        $option_str = '';        $arr_records = array();        $sql = "SELECT DISTINCT service_rendered FROM `tblprofusers` WHERE `service_rendered` != '' ORDER BY `pro_user_add_date` ASC";          $STH = $DBH->prepare($sql);           $STH->execute();        if($STH->rowCount() > 0)        {            while($row = $STH->fetch(PDO::FETCH_ASSOC))             {                $service_rendered = stripslashes($row['service_rendered']);                if($service_rendered == '' || $service_rendered == '::')                {                                    }                else                {                    $pos = strpos($service_rendered, '::');                    if ($pos !== false)                     {                        $temp_arr = explode('::', $service_rendered);                        for($i=0;$i<count($temp_arr);$i++)                        {                            array_push($arr_records , $temp_arr[$i]);                        }                    }                    else                    {                        array_push($arr_records , $service_rendered);                    }                }            }                          if(count($arr_records) > 0)            {                for($i=0;$i<count($arr_records);$i++)                {                    if($arr_records[$i] == $pro_user_service)                    {                        $sel = ' selected ';                    }                    else                    {                        $sel = '';                    }                                        $option_str .= '<option value="'.$arr_records[$i].'" '.$sel.'>'.$arr_records[$i].'</option>';                }            }        }        return $option_str;    }        public function getHeightOptions($height_id)    {        $my_DBH = new mysqlConnection();        $DBH = $my_DBH->raw_handle();        $DBH->beginTransaction();        $option_str = '';		        $sql = "SELECT * FROM `tblheights` ORDER BY `height_cms` ASC";          $STH = $DBH->prepare($sql);           $STH->execute();        if($STH->rowCount() > 0)        {            while($row = $STH->fetch(PDO::FETCH_ASSOC))             {                if($row['height_id'] == $height_id)                {                    $sel = ' selected ';                }                else                {                    $sel = '';                }		                $option_str .= '<option value="'.$row['height_id'].'" '.$sel.'>'.$row['height_cms'].' cms ('.$row['height_feet_inch'].' feet)</option>';            }        }        return $option_str;    }        public function getPRCTReferenceOptions($prct_ref_no)    {        $my_DBH = new mysqlConnection();        $DBH = $my_DBH->raw_handle();        $DBH->beginTransaction();        $option_str = '';        $sql = "SELECT DISTINCT prct_ref_no FROM `tblprofilecustomization` WHERE `prct_ref_no` != '' AND `deleted` = '0' AND `status` = '1' ORDER BY prct_ref_no ASC";          $STH = $DBH->prepare($sql);          $STH->execute();        if($STH->rowCount() > 0)        {            while($row = $STH->fetch(PDO::FETCH_ASSOC))            {                if($row['prct_ref_no'] == $prct_ref_no)                {                    $selected = ' selected ';                }                else                {                    $selected = '';                }                $option_str .= '<option value="'.stripslashes($row['prct_ref_no']).'" '.$selected.' >'.stripslashes($row['prct_ref_no']).'</option>';            }	         }                return $option_str;    }        public function getModuleNamePCM($module_id)    {        $my_DBH = new mysqlConnection();        $DBH = $my_DBH->raw_handle();        $DBH->beginTransaction();        $return = 'All Modules';                if($module_id == '12')        {            $return = 'My Activity';        }        elseif($module_id == '13')        {            $return = 'My Food Today';        }        elseif($module_id == '45')        {            $return = 'My Situation Today';        }        elseif($module_id == '113')        {            $return = 'My Current Physical State';        }                return $return;    }        public function getPRCTCategoryName($prct_cat_id)    {        $my_DBH = new mysqlConnection();        $DBH = $my_DBH->raw_handle();        $DBH->beginTransaction();        $prct_cat = '';                //$sql = "SELECT * FROM `tblprofilecustomcategories` WHERE `prct_cat_id` = '".$prct_cat_id."' AND `prct_cat_deleted` = '0' ";        $sql = "SELECT * FROM `tblfavcategory` WHERE `fav_cat_id` = '".$prct_cat_id."' AND `fav_cat_deleted` = '0' ";          $STH = $DBH->prepare($sql);          $STH->execute();        if($STH->rowCount() > 0)        {            $row = $STH->fetch(PDO::FETCH_ASSOC);            //$prct_cat = stripcslashes($row['prct_cat']);            $prct_cat = stripcslashes($row['fav_cat']);        }                    return $prct_cat;    }        public function getPRCTCategoryOptions($prct_cat_id)    {        $my_DBH = new mysqlConnection();        $DBH = $my_DBH->raw_handle();        $DBH->beginTransaction();        $option_str = '';        //$sql = "SELECT * FROM `tblprofilecustomcategories` WHERE `prct_cat_status` = '1' AND `prct_cat_deleted` = '0' ORDER BY prct_cat ASC";        $sql = "SELECT * FROM `tblfavcategory` WHERE `fav_cat_type_id` IN (2,4) AND  `fav_cat_status` = '1' AND `fav_cat_deleted` = '0' ORDER BY `fav_cat` ASC";          $STH = $DBH->prepare($sql);          $STH->execute();        if($STH->rowCount() > 0)        {            while($row = $STH->fetch(PDO::FETCH_ASSOC))            {                //if($row['prct_cat_id'] == $prct_cat_id)                if($row['fav_cat_id'] == $prct_cat_id)                {                    $selected = ' selected ';                }                else                {                    $selected = '';                }                $option_str .= '<option value="'.$row['fav_cat_id'].'" '.$selected.' >'.stripslashes($row['fav_cat']).'</option>';            }	         }                return $option_str;    }        public function getAllProfileCustomizationList($search,$status,$start_date,$prct_ref_no,$prct_cat_id,$module_id,$situation_id,$added_by_user,$prct_add_date)    {        $my_DBH = new mysqlConnection();        $DBH = $my_DBH->raw_handle();        $DBH->beginTransaction();        $admin_id = $_SESSION['admin_id'];        $edit_action_id = '269';        $delete_action_id = '270';        $edit = $this->chkValidActionPermission($admin_id,$edit_action_id);        $delete = $this->chkValidActionPermission($admin_id,$delete_action_id);        if($search == '')        {            $str_sql_search = '';        }        else        {            $str_sql_search = '';        }                if($status == '')        {            $str_sql_status = '';        }        else        {            $str_sql_status = " AND `status` = '".$status."'";        }                if($start_date == '')        {            $str_sql_date = "";        }        else        {            /*            $start_date = date('Y-m-d',strtotime($start_date));            $today_day = date('j',strtotime($start_date));            $today_date = date('Y-m-d',strtotime($start_date));            $today_weekday = date('w',strtotime($start_date));            $today_weekday = $today_weekday + 1;            $today_month_no = date('n',strtotime($start_date));            $str_sql_date = " AND ( (`listing_date_type` = 'days_of_month' AND FIND_IN_SET('".$today_day."', days_of_month) ) OR "                    . "(`listing_date_type` = 'days_of_week' AND FIND_IN_SET('".$today_weekday."', days_of_week) ) OR "                    . "(`listing_date_type` = 'month_wise' AND FIND_IN_SET('".$today_month_no."', months) ) OR "                    . "(`listing_date_type` = 'single_date' AND `single_date` = '".$today_date."') OR "                    . "(`listing_date_type` = 'date_range' AND `start_date` <= '".$today_date."' AND `end_date` >= '".$today_date."') ) ";             *              */                        $str_sql_date = '';        }                if($prct_ref_no == '')        {            $str_sql_ref_no = '';        }           else         {            $str_sql_ref_no = " AND `prct_ref_no` = '".$prct_ref_no."'";        }                if($prct_cat_id == '')        {            $str_sql_cat_id = '';        }           else         {            //$str_sql_cat_id = " AND `prct_cat_id` = '".$prct_cat_id."'";            $str_sql_cat_id = '';        }                if($module_id == '')        {            $str_sql_module_id = '';        }           else         {            $str_sql_module_id = " AND `module_id` = '".$module_id."'";        }                if($situation_id == '')        {            $str_sql_situation_id = '';        }           else         {            $temp_arr1 = explode('_',$situation_id);            $keyword_id = $temp_arr1[1];            $keyword_type = $temp_arr1[0];            $str_sql_situation_id = " AND `keyword_id` = '".$keyword_id."' AND `keyword_type` = '".$keyword_type."'";        }                        if($added_by_user == '')        {            $str_sql_added_by_user = '';        }           else         {            $str_sql_added_by_user = " AND `added_by_user` = '".$added_by_user."'";        }                if($prct_add_date == '')        {            $str_sql_prct_add_date = '';        }           else         {            $prct_add_date = date('Y-m-d',strtotime($prct_add_date));            $str_sql_prct_add_date = " AND `prct_add_date` = DATE('".$prct_add_date."')";        }                $sql = "SELECT * FROM `tbl_profile_customization_add_more` WHERE `deleted` = '0' ".$str_sql_search." ".$str_sql_status." ".$str_sql_date." ".$str_sql_ref_no." ".$str_sql_cat_id." ".$str_sql_module_id." ".$str_sql_situation_id." ".$str_sql_added_by_user." ".$str_sql_prct_add_date." ORDER BY prct_add_more_id DESC";	//echo '<br>'.$sql;          $STH = $DBH->prepare($sql);           $STH->execute();	$total_records=$STH->rowCount();	$record_per_page=100;	$scroll=5;	$page=new Page();     	$page->set_page_data($_SERVER['PHP_SELF'],$total_records,$record_per_page,$scroll,true,true,true);        $page->set_link_parameter("Class = paging");        $page->set_qry_string($str="mode=profile_customization&search=".urlencode($search).'&status='.$status.'&start_date='.$start_date.'&prct_ref_no='.$prct_ref_no.'&prct_cat_id='.$prct_cat_id.'&module_id='.$module_id.'&situation_id='.$situation_id);        $STH = $DBH->prepare($page->get_limit_query($sql));        $STH->execute();        $output = '';		        if($STH->rowCount() > 0)        {            if( isset($_GET['page']) && is_numeric($_GET['page']) && $_GET['page'] > 0 )            {                $i = $page->start + 1;            }            else            {                $i = 1;            }            $obj = new ProfileCustomization();            while($row = $STH->fetch(PDO::FETCH_ASSOC))            {                $alldata = $obj->getprofilecustomizationData($row['prct_id']);                if($alldata['status'] == 1)                {                    $status = 'Active';                 }                else                {                     $status = 'Inactive';                }                                /*                if($row['listing_date_type'] == 'days_of_month')                {                    $date_type = 'Days of Month';                    $date_value = stripslashes($row['days_of_month']);                    $date_value = str_replace(',', ' , ', $date_value);                }                elseif($row['listing_date_type'] == 'single_date')                {                    $date_type = 'Single Date';                    $date_value = date('d-m-Y',strtotime($row['single_date']));                }                elseif($row['listing_date_type'] == 'date_range')                {                    $date_type = 'Date Range';                    $date_value = date('d-m-Y',strtotime($row['start_date'])).' - '.date('d-m-Y',strtotime($row['end_date']));                }                elseif($row['listing_date_type'] == 'days_of_week')                {                    $date_type = 'Days of Week';                    $date_value = $obj->getDayOfWeekCommaStr($row['days_of_week']);                    $date_value = str_replace(',', ' , ', $date_value);                }                elseif($row['listing_date_type'] == 'month_wise')                {                    $date_type = 'Month Wise';                    $date_value = $obj->getMonthsCommastr($row['months']);                    $date_value = str_replace(',', ' , ', $date_value);                }                elseif($row['listing_date_type'] == '')                {                    $date_type = 'All';                    $date_value = '';                }                 *                  */                                 $prct_id = $row['prct_id'];                                                //                print_r($alldata['prct_id']);die();//                $prct_cat = $obj->getPRCTCategoryName($row['prct_cat_id']);//                $prct_cat = '';                $prct_ref_no = $alldata['prct_ref_no'];                $module_id = $alldata['module_id'];                                if($row['module_id']=='12')                {                    $module_name = 'My Activity';                }                else if($row['module_id']=='13')                {                    $module_name = 'My Food Today';                }                else if($row['module_id']=='45')                {                    $module_name = 'My Situation Today';                }                $module = $obj->getModuleNamePCM($module_id);                                $keyword_id = $row['keywords'];                $keywords = $obj->getAllKeywordFromThreeTableDetails($row['module_id'],$keyword_id);                $keyword_scale_type = $alldata['keyword_scale_type'];                $keyword_scale_value1 = $alldata['keyword_scale_value1'];                $keyword_scale_value2 = $alldata['keyword_scale_value2'];                $keyword_scale_value = $obj->getKeywordScaleValueStr($keyword_scale_type,$keyword_scale_value1,$keyword_scale_value2);                $criteria_id = $row['module_criteria'];                $criteria = $obj->getCriteriaName($criteria_id);                $criteria_scale_type = $row['criteria_scale_range'];                $criteria_scale_value1 = $row['start_criteria_scale_value'];                $criteria_scale_value2 = $row['end_criteria_scale_value'];                $criteria_scale_value = $obj->getCriteriaScaleValueStr($criteria_scale_type,$criteria_scale_value1,$criteria_scale_value2);                                $time= strtotime($alldata['prct_add_date']);                $time=$time+19800;                $add_date = date('d-M-Y h:i A',$time);                                if($alldata['added_by_user'] == 0)                {                    $add_by_user = $obj->getUsenameOfAdmin($alldata['user_id']);                }                else                {                    $add_by_user = 'User';                }                                $output .= '<tr class="manage-row">';                $output .= '<td height="30"  align="center" nowrap="nowrap" >'.$i.'</td>';                $output .= '<td height="30" align="center">'.$prct_ref_no.'</td>';                $output .= '<td height="30" align="center">'.$row['page_name'].'</td>';                $output .= '<td height="30" align="center">'.$module_name.'</td>';                $output .= '<td height="30" align="center">'.$keywords.'</td>';                $output .= '<td height="30" align="center">'.$keyword_scale_value.'</td>';                $output .= '<td height="30" align="center">'.$criteria.'</td>';                $output .= '<td height="30" align="center">'.$criteria_scale_value.'</td>';                //$output .= '<td height="30" align="center">'.$date_type.'</td>';                //$output .= '<td height="30" align="center">'.$date_value.'</td>';                $output .= '<td height="30" align="center">'.$status.'</td>';                $output .= '<td height="30" align="center">'.$add_date.'</td>';                $output .= '<td height="30" align="center">'.$add_by_user.'</td>';                $output .= '<td height="30" align="center" nowrap="nowrap">';                if($edit) {                $output .= '<a href="index.php?mode=edit_profile_customization&id='.$row['prct_id'].'&prct_add_more_id='.$row['prct_add_more_id'].'" ><img src = "images/edit.gif" border="0"></a>';                }                $output .= '</td>';                $output .= '<td height="30" align="center" nowrap="nowrap">';                if($delete) {                $output .= '<a href=\'javascript:fn_confirmdelete("Record","sql/delprofilecustomization.php?id='.$row['prct_add_more_id'].'")\' ><img src = "images/del.gif" border="0" ></a>';                }                $output .= '</td>';                $output .= '</tr>';                $i++;            }        }        else        {            $output = '<tr class="manage-row"><td height="30" colspan="12" align="center">NO RECORDS FOUND</td></tr>';        }	$page->get_page_nav();	return $output;    }        public function getprofilecustomizationData($prct_id)    {        $my_DBH = new mysqlConnection();        $DBH = $my_DBH->raw_handle();        $DBH->beginTransaction();        $prct_data = '';                //$sql = "SELECT * FROM `tblprofilecustomcategories` WHERE `prct_cat_id` = '".$prct_cat_id."' AND `prct_cat_deleted` = '0' ";        $sql = "SELECT * FROM `tblprofilecustomization` WHERE `prct_id` = '".$prct_id."'";          $STH = $DBH->prepare($sql);          $STH->execute();        if($STH->rowCount() > 0)        {            $row = $STH->fetch(PDO::FETCH_ASSOC);            $prct_data = $row;        }                    return $prct_data;    }        public function addProfileCustomization($fav_cat_type_id,$fav_cat_id,$custmz_user_id,$custmz_practitioner_id,$customization_id,$page_name,$keywords,$cat_total_cnt1,$prct_ref_no,$prct_cat_id,$module_id,$arr_keyword_id,$listing_date_type,$days_of_month,$single_date,$start_date,$end_date,$module_criteria,$scale_range,$start_scale_value,$end_scale_value,$criteria_scale_range,$start_criteria_scale_value,$end_criteria_scale_value,$days_of_week,$months,$user_country_id,$user_state_id,$user_city_id,$user_place_id,$user_gender,$user_food_option,$user_height1,$user_height2,$user_weight1,$user_weight2,$user_age1,$user_age2,$user_bmi1,$user_bmi2,$pro_user_country_id,$pro_user_state_id,$pro_user_city_id,$pro_user_place_id,$pro_user_gender,$pro_user_age1,$pro_user_age2,$pro_user_service)    {                        $my_DBH = new mysqlConnection();        $DBH = $my_DBH->raw_handle();        $DBH->beginTransaction();        $return = false;                $admin_id = $_SESSION['admin_id'];                for($i=0;$i<count($arr_keyword_id);$i++)        {            $temp_arr = explode('_', $arr_keyword_id[$i]);            $keyword_id = $temp_arr[1];            $keyword_type = $temp_arr[0];                        $ins_sql = "INSERT INTO `tblprofilecustomization`(`custmz_user_id`,`custmz_practitioner_id`,`sol_item_id`,`page_name`,`prct_ref_no`,`prct_cat_id`,`listing_date_type`,`days_of_month`,`single_date`,"                    . "`start_date`,`end_date`,`days_of_week`,`months`,`module_id`,`keyword_id`,`keyword_type`,`keyword_scale_type`,"                    . "`keyword_scale_value1`,`keyword_scale_value2`,`criteria_id`,`criteria_scale_type`,`criteria_scale_value1`,"                    . "`criteria_scale_value2`,`added_by_user`,`user_id`,`status`,`user_country_id`,`user_state_id`,`user_city_id`,"                    . "`user_place_id`,`user_gender`,`user_food_option`,`user_height1`,`user_height2`,`user_weight1`,`user_weight2`,"                    . "`user_age1`,`user_age2`,`user_bmi1`,`user_bmi2`,`pro_user_country_id`,`pro_user_state_id`,`pro_user_city_id`,"                    . "`pro_user_place_id`,`pro_user_gender`,`pro_user_age1`,`pro_user_age2`,`pro_user_service`) "                    . "VALUES ('".$custmz_user_id."','".$custmz_practitioner_id."','".$customization_id."','".$page_name."','".addslashes($prct_ref_no)."','".addslashes($prct_cat_id)."','".addslashes($listing_date_type)."',"                    . "'".addslashes($days_of_month)."','".addslashes($single_date)."','".addslashes($start_date)."','".addslashes($end_date)."',"                    . "'".addslashes($days_of_week)."','".addslashes($months)."','".addslashes($module_id)."','".addslashes($keyword_id)."',"                    . "'".addslashes($keyword_type)."','".addslashes($scale_range)."','".addslashes($start_scale_value)."',"                    . "'".addslashes($end_scale_value)."','".addslashes($module_criteria)."','".addslashes($criteria_scale_range)."',"                    . "'".addslashes($start_criteria_scale_value)."','".addslashes($end_criteria_scale_value)."','0','".$admin_id."','1',"                    . "'".addslashes($user_country_id)."','".addslashes($user_state_id)."','".addslashes($user_city_id)."',"                    . "'".addslashes($user_place_id)."','".addslashes($user_gender)."','".addslashes($user_food_option)."',"                    . "'".addslashes($user_height1)."','".addslashes($user_height2)."','".addslashes($user_weight1)."','".addslashes($user_weight2)."',"                    . "'".addslashes($user_age1)."','".addslashes($user_age2)."','".addslashes($user_bmi1)."','".addslashes($user_bmi2)."',"                    . "'".addslashes($pro_user_country_id)."','".addslashes($pro_user_state_id)."','".addslashes($pro_user_city_id)."',"                    . "'".addslashes($pro_user_place_id)."','".addslashes($pro_user_gender)."','".addslashes($pro_user_age1)."',"                    . "'".addslashes($pro_user_age2)."','".addslashes($pro_user_service)."')";            //echo $ins_sql;             $STH = $DBH->prepare($ins_sql);              $STH->execute();             // $prct_id = $this->getInsertID();              $prct_id = $DBH->lastInsertId();                          if($page_name=='wellness_solution_items')                {                $upd_sql = "UPDATE `tblsolutionitems` SET `prct_id` = '".$prct_id."'  WHERE `sol_item_id` = '".$customization_id."'";                 $STH = $DBH->prepare($upd_sql);                   $STH->execute();                }             else if($page_name=='report_customisation')             {                 $upd_sql = "UPDATE `tbl_recordshow_dropdown` SET `prct_id` = '".$prct_id."'  WHERE `page_cat_id` = '".$customization_id."'";                 $STH = $DBH->prepare($upd_sql);                   $STH->execute();             }                       }                if(count($cat_total_cnt1) > 0)                    {                            for($i=0; $i<$cat_total_cnt1; $i++)                            {                                    $tdata_cat = array();                                    $tdata_cat['prct_id'] = $prct_id;                                    $tdata_cat['page_name'] = $page_name;                                    $tdata_cat['fav_cat_type_id'] = $fav_cat_type_id[$i];                                    $tdata_cat['fav_cat_id'] = $fav_cat_id[$i];                                    $tdata_cat['module_id'] = $module_id[$i];                                    $tdata_cat['module_criteria'] = $module_criteria[$i];                                    $tdata_cat['scale_range'] = $scale_range[$i];                                    $tdata_cat['start_scale_value'] = $start_scale_value[$i];                                    $tdata_cat['end_scale_value'] = $end_scale_value[$i];                                    $tdata_cat['criteria_scale_range'] = $criteria_scale_range[$i];                                    $tdata_cat['start_criteria_scale_value'] = $start_criteria_scale_value[$i];                                    $tdata_cat['end_criteria_scale_value'] = $end_criteria_scale_value[$i];                                                                        if($module_id[$i] == '45')                                    {                                    $keywords_id_data = $this->getInterpretationnaebyidVivek($keywords[$i]);                                    }                                    else if($module_id[$i] == '12')                                    {                                    $keywords_id_data = $this->getDailyActivityNamebyidVivek($keywords[$i]);                                    }                                    else if($module_id[$i] == '13')                                    {                                    $keywords_id_data = $this->getDailyMealsNamebyidVivek($keywords[$i]);                                    }                                   //                                    $this->addfavcategory($tdata_cat);	                               $sql2 = "INSERT INTO `tbl_profile_customization_add_more`(`page_name`,`fav_cat_type_id`,`fav_cat_id`,`keywords`,`prct_id`,`module_id`,`module_criteria`,`scale_range`,`start_scale_value`,`end_scale_value`,`criteria_scale_range`,`start_criteria_scale_value`,`end_criteria_scale_value`) VALUES ('".$tdata_cat['page_name']."','".$tdata_cat['fav_cat_type_id']."','".addslashes($tdata_cat['fav_cat_id'])."','".$keywords_id_data."','".addslashes($tdata_cat['prct_id'])."','".addslashes($tdata_cat['module_id'])."','".addslashes($tdata_cat['module_criteria'])."','".addslashes($tdata_cat['scale_range'])."','".addslashes($tdata_cat['start_scale_value'])."','".addslashes($tdata_cat['end_scale_value'])."','".addslashes($tdata_cat['criteria_scale_range'])."','".addslashes($tdata_cat['start_criteria_scale_value'])."','".$tdata_cat['end_criteria_scale_value']."')";                                                                  $STH = $DBH->prepare($sql2);                                  $STH->execute();                                                          }                    }                    if($STH->rowCount() > 0)		{			$return = true;		}		return $return;        return $return;    }     public function getInterpretationnaebyidVivek($keywords)	{            $my_DBH = new mysqlConnection();            $DBH = $my_DBH->raw_handle();            $DBH->beginTransaction();            $return = '';                        $sql = "SELECT * FROM `tblbodymainsymptoms` WHERE `bms_name` = '".$keywords."' ";              $STH = $DBH->prepare($sql);               $STH->execute();            if($STH->rowCount() > 0)            {                    $row = $STH->fetch(PDO::FETCH_ASSOC);                    $return = $row['bms_id'];            }            return $return;	}      public function getTitleNameByIdVivek($customization_id)	{            $my_DBH = new mysqlConnection();            $DBH = $my_DBH->raw_handle();            $DBH->beginTransaction();            $return = '';                        $sql = "SELECT * FROM `tblsolutionitems` WHERE `sol_item_id` = '".$customization_id."' ";              $STH = $DBH->prepare($sql);               $STH->execute();            if($STH->rowCount() > 0)            {                    $row = $STH->fetch(PDO::FETCH_ASSOC);                    $return = $row['sol_box_title'];            }            return $return;	}           public function getAllKeywordsChkeckbox($module_id,$arr_selected_situation_id,$width = '400',$height = '350')    {        $my_DBH = new mysqlConnection();        $DBH = $my_DBH->raw_handle();        $DBH->beginTransaction();        $output = '';                $data = array();                if($module_id == '113')        {            $sql = "SELECT * FROM `tblbodymainsymptoms` WHERE `bmst_id` = '1' AND `bms_status` = '1' AND `bms_deleted` = '0' ORDER BY `bms_name` ASC";              $STH = $DBH->prepare($sql);               $STH->execute();            if($STH->rowCount() > 0)            {                while($row = $STH->fetch(PDO::FETCH_ASSOC))                 {                    $data['bms_'.$row['bms_id']] = stripslashes($row['bms_name']);                }            }        }        elseif($module_id == '45')        {            $sql = "SELECT * FROM `tblbodymainsymptoms` WHERE `bmst_id` = '2' AND `bms_status` = '1' AND `bms_deleted` = '0' ORDER BY `bms_name` ASC";              $STH = $DBH->prepare($sql);              $STH->execute();            if($STH->rowCount() > 0)            {                while($row = $STH->fetch(PDO::FETCH_ASSOC))                 {                    $data['bms_'.$row['bms_id']] = stripslashes($row['bms_name']);                }            }            $sql = "SELECT * FROM `tbladdictions` WHERE `status` = '1' ORDER BY `situation` ASC";              $STH = $DBH->prepare($sql);               $STH->execute();            if($STH->rowCount() > 0)            {                while($row = $STH->fetch(PDO::FETCH_ASSOC))                 {                    $data['adct_'.$row['adct_id']] = stripslashes($row['situation']);                }            }            $sql = "SELECT * FROM `tblsleeps` WHERE  `status` = '1' ORDER BY `situation` ASC";              $STH = $DBH->prepare($sql);              $STH->execute();            if($STH->rowCount() > 0)            {                while($row = $STH->fetch(PDO::FETCH_ASSOC))                 {                    $data['sleep_'.$row['sleep_id']] = stripslashes($row['situation']);                }            }            $sql = "SELECT * FROM `tblgeneralstressors` WHERE `status` = '1' ORDER BY `situation` ASC";              $STH = $DBH->prepare($sql);              $STH->execute();            if($STH->rowCount() > 0)            {                while($row = $STH->fetch(PDO::FETCH_ASSOC))                 {                    $data['gs_'.$row['gs_id']] = stripslashes($row['situation']);                }            }            $sql = "SELECT * FROM `tblworkandenvironments` WHERE `status` = '1' ORDER BY `situation` ASC";              $STH = $DBH->prepare($sql);              $STH->execute();            if($STH->rowCount() > 0)            {                while($row = $STH->fetch(PDO::FETCH_ASSOC))                 {                    $data['wae_'.$row['wae_id']] = stripslashes($row['situation']);                }            }            $sql = "SELECT * FROM `tblmycommunications` WHERE  `status` = '1' ORDER BY `situation` ASC";            //echo 'mc sql ='.$sql;              $STH = $DBH->prepare($sql);              $STH->execute();            if($STH->rowCount() > 0)            {                while($row = $STH->fetch(PDO::FETCH_ASSOC))                 {                    $data['mc_'.$row['mc_id']] = stripslashes($row['situation']);                }            }            $sql = "SELECT * FROM `tblmyrelations` WHERE `status` = '1' ORDER BY `situation` ASC";              $STH = $DBH->prepare($sql);              $STH->execute();            if($STH->rowCount() > 0)            {                while($row = $STH->fetch(PDO::FETCH_ASSOC))                 {                    $data['mr_'.$row['mr_id']] = stripslashes($row['situation']);                }            }            $sql = "SELECT * FROM `tblmajorlifeevents` WHERE  `status` = '1' ORDER BY `situation` ASC";              $STH = $DBH->prepare($sql);               $STH->execute();            if($STH->rowCount() > 0)            {                while($row = $STH->fetch(PDO::FETCH_ASSOC))                 {                    $data['mle_'.$row['mle_id']] = stripslashes($row['situation']);                }            }        }        elseif($module_id == '12')        {            $sql = "SELECT * FROM `tbldailyactivity` ORDER BY `activity` ASC";              $STH = $DBH->prepare($sql);              $STH->execute();            if($STH->rowCount() > 0)            {                while($row = $STH->fetch(PDO::FETCH_ASSOC))                 {                    $data['activity_'.$row['activity_id']] = stripslashes($row['activity']);                }            }        }        elseif($module_id == '13')        {            $sql = "SELECT * FROM `tbldailymeals` ORDER BY `meal_item` ASC";              $STH = $DBH->prepare($sql);               $STH->execute();            if($STH->rowCount() > 0)            {                while($row = $STH->fetch(PDO::FETCH_ASSOC))                 {                    $data['meal_'.$row['meal_id']] = stripslashes($row['meal_item']);                }            }        }                $output .= '<div style="width:'.$width.'px;float:left;margin-bottom:10px;">                            <input type="checkbox" name="all_selected_situation_id" id="all_selected_situation_id" value="1" onclick="toggleCheckBoxes(\'selected_situation_id\'); " />&nbsp;<strong>Select All</strong>                         </div>                        <div style="clear:both;"></div>';                    if(count($data) > 0)        {            natcasesort($data);                                    $output .= '<div style="width:'.$width.'px;height:'.$height.'px;float:left;overflow:scroll;margin-bottom:20px;;">';            $output .= '    <ul style="list-style:none;padding:0px;margin:0px;">';            $i = 1;            foreach ($data as $key => $val)             {                $page_id = $key;                $page_name = $val;                if(in_array($page_id,$arr_selected_situation_id))                {                    $selected = ' checked ';                }                else                {                    $selected = '';                }                //$liwidth = $width - 20;                $liwidth = 300;                $output .= '<li style="padding:0px;width:'.$liwidth.'px;float:left;"><input type="checkbox" '.$selected.' name="selected_situation_id[]" id="selected_situation_id_'.$i.'" value="'.$page_id.'" />&nbsp;<strong>'.$page_name.'</strong></li>';                $i++;            }            $output .= '</ul></div>';        }        return $output;    }        public function getAllKeywordsDropdown($module_id,$selected_situation_id)    {        $my_DBH = new mysqlConnection();        $DBH = $my_DBH->raw_handle();        $DBH->beginTransaction();        $output = '';                $data = array();                if($module_id == '113')        {            $sql = "SELECT * FROM `tblbodymainsymptoms` WHERE `bmst_id` = '1' AND `bms_status` = '1' AND `bms_deleted` = '0' ORDER BY `bms_name` ASC";              $STH = $DBH->prepare($sql);              $STH->execute();            if($STH->rowCount() > 0)            {                while($row = $STH->fetch(PDO::FETCH_ASSOC))                 {                    $data['bms_'.$row['bms_id']] = stripslashes($row['bms_name']);                }            }        }        elseif($module_id == '45')        {            $sql = "SELECT * FROM `tblbodymainsymptoms` WHERE `bmst_id` = '2' AND `bms_status` = '1' AND `bms_deleted` = '0' ORDER BY `bms_name` ASC";              $STH = $DBH->prepare($sql);              $STH->execute();            if($STH->rowCount() > 0)            {                while($row = $STH->fetch(PDO::FETCH_ASSOC))                 {                    $data['bms_'.$row['bms_id']] = stripslashes($row['bms_name']);                }            }            $sql = "SELECT * FROM `tbladdictions` WHERE `status` = '1' ORDER BY `situation` ASC";              $STH = $DBH->prepare($sql);               $STH->execute();            if($STH->rowCount() > 0)            {                while($row = $STH->fetch(PDO::FETCH_ASSOC))                 {                    $data['adct_'.$row['adct_id']] = stripslashes($row['situation']);                }            }            $sql = "SELECT * FROM `tblsleeps` WHERE  `status` = '1' ORDER BY `situation` ASC";              $STH = $DBH->prepare($sql);               $STH->execute();            if($STH->rowCount() > 0)            {                while($row = $STH->fetch(PDO::FETCH_ASSOC))                 {                    $data['sleep_'.$row['sleep_id']] = stripslashes($row['situation']);                }            }            $sql = "SELECT * FROM `tblgeneralstressors` WHERE `status` = '1' ORDER BY `situation` ASC";              $STH = $DBH->prepare($sql);               $STH->execute();            if($STH->rowCount() > 0)            {                while($row = $STH->fetch(PDO::FETCH_ASSOC))                 {                    $data['gs_'.$row['gs_id']] = stripslashes($row['situation']);                }            }            $sql = "SELECT * FROM `tblworkandenvironments` WHERE `status` = '1' ORDER BY `situation` ASC";              $STH = $DBH->prepare($sql);               $STH->execute();            if($STH->rowCount() > 0)            {                while($row = $STH->fetch(PDO::FETCH_ASSOC))                 {                    $data['wae_'.$row['wae_id']] = stripslashes($row['situation']);                }            }            $sql = "SELECT * FROM `tblmycommunications` WHERE  `status` = '1' ORDER BY `situation` ASC";            //echo 'mc sql ='.$sql;              $STH = $DBH->prepare($sql);  $STH->execute();            if($STH->rowCount() > 0)            {                while($row = $STH->fetch(PDO::FETCH_ASSOC))                 {                    $data['mc_'.$row['mc_id']] = stripslashes($row['situation']);                }            }            $sql = "SELECT * FROM `tblmyrelations` WHERE `status` = '1' ORDER BY `situation` ASC";              $STH = $DBH->prepare($sql);               $STH->execute();            if($STH->rowCount() > 0)            {                while($row = $STH->fetch(PDO::FETCH_ASSOC))                 {                    $data['mr_'.$row['mr_id']] = stripslashes($row['situation']);                }            }            $sql = "SELECT * FROM `tblmajorlifeevents` WHERE  `status` = '1' ORDER BY `situation` ASC";              $STH = $DBH->prepare($sql);               $STH->execute();            if($STH->rowCount() > 0)            {                while($row = $STH->fetch(PDO::FETCH_ASSOC))                 {                    $data['mle_'.$row['mle_id']] = stripslashes($row['situation']);                }            }        }        elseif($module_id == '12')        {            $sql = "SELECT * FROM `tbldailyactivity` ORDER BY `activity` ASC";              $STH = $DBH->prepare($sql);               $STH->execute();            if($STH->rowCount() > 0)            {                while($row = $STH->fetch(PDO::FETCH_ASSOC))                 {                    $data['activity_'.$row['activity_id']] = stripslashes($row['activity']);                }            }        }        elseif($module_id == '13')        {            $sql = "SELECT * FROM `tbldailymeals` ORDER BY `meal_item` ASC";              $STH = $DBH->prepare($sql);               $STH->execute();            if($STH->rowCount() > 0)            {                while($row = $STH->fetch(PDO::FETCH_ASSOC))                 {                    $data['meal_'.$row['meal_id']] = stripslashes($row['meal_item']);                }            }        }                if(count($data) > 0)        {            natcasesort($data);            foreach ($data as $key => $val)             {                $page_id = $key;                $page_name = $val;                if($page_id == $selected_situation_id)                {                    $selected = ' selected ';                }                else                {                    $selected = '';                }                $output .= '<option value="'.$page_id.'" '.$selected.'>'.$page_name.'</option>';            }        }        return $output;    }     public function getModuleWiseCriteriaOptionsPCM($report_module,$module_criteria)    {        $option_str = ''; $option_str .= '<option value=" ">All</option>';        if($report_module == '12')        {            if($module_criteria == '3')            {                $sel = ' selected ';            }            else            {                $sel = '';            }		                        $option_str .= '<option value="3" '.$sel.'>Duration</option>';            if($module_criteria == '4')            {                $sel = ' selected ';            }            else            {                $sel = '';            }		            $option_str .= '<option value="4" '.$sel.'>Time</option>';            if($module_criteria == '8')            {                $sel = ' selected ';            }            else            {                $sel = '';            }		            $option_str .= '<option value="8" '.$sel.'>Calories Burnt</option>';        }        elseif($report_module == '13')        {            if($module_criteria == '4')            {                $sel = ' selected ';            }            else            {                $sel = '';            }		            $option_str .= '<option value="4" '.$sel.'>Time</option>';            if($module_criteria == '5')            {                $sel = ' selected ';            }            else            {                $sel = '';            }		            $option_str .= '<option value="5" '.$sel.'>Quantity</option>';            if($module_criteria == '6')            {                $sel = ' selected ';            }            else            {                $sel = '';            }		            $option_str .= '<option value="6" '.$sel.'>My Desire</option>';        }        elseif($report_module == '113')        {        }        elseif($report_module == '45' )        {            /*            if($module_criteria == '9')            {                $sel = ' selected ';            }            else            {                $sel = '';            }		            $option_str .= '<option value="9" '.$sel.'>Triggers</option>';             *              */            if($module_criteria == '3')            {                $sel = ' selected ';            }            else            {                $sel = '';            }		            $option_str .= '<option value="3" '.$sel.'>Duration</option>';            if($module_criteria == '4')            {                $sel = ' selected ';            }            else            {                $sel = '';            }		            $option_str .= '<option value="4" '.$sel.'>Time</option>';        }        elseif($report_module == '')        {        }        else         {        }        if($module_criteria == '7')        {            $sel = ' selected ';        }        else        {            $sel = '';        }		        $option_str .= '<option value="7" '.$sel.'>Days</option>';        return $option_str;    }        public function getCriteriaName($module_criteria)    {        $option_str = 'All';                    if($module_criteria == '3')            {                $option_str = 'Duration';            }            elseif($module_criteria == '4')            {                $option_str = 'Time';            }            elseif($module_criteria == '5')            {                $option_str = 'Quantity';            }            elseif($module_criteria == '6')            {                $option_str = 'My Desire';            }            elseif($module_criteria == '7')            {                $option_str = 'Days';            }            elseif($module_criteria == '8')            {                $option_str = 'Calories Burnt';            }            elseif($module_criteria == '9')            {                $option_str = 'Triggers';            }        return $option_str;    }     public function getModuleName($module_id='')    {        $option_str .= '<option value="" '.$sel.'>Select Modules</option>';        if($module_id == '12')            {                $sel = 'selected';            }//            elseif($module_id == '113')////            {////                $sel = 'selected';////            }            elseif($module_id == '13')            {                $sel = 'selected';            }            elseif($module_id == '45')            {                $sel = 'selected';            }        $option_str .= '<option value="12" '.$sel.'>My Activity</option>';//         $option_str .= '<option value="113" '.$sel.'>My Current Physical State</option>';          $option_str .= '<option value="13" '.$sel.'>My Food Today</option>';           $option_str .= '<option value="45" '.$sel.'>My Situation Today</option>';                   return $option_str;    }        public function getTimeOptions($start_time,$end_time,$time){	$start = $start_time *60 + 0;	$end = $end_time * 60+0;		for($i = $start; $i<$end; $i += 15)	{				$minute = $i % 60;		$hour = ($i - $minute)/60;						if( ($hour >=24) && ($hour <= 36) )		{			$hour = $hour - 24;		}						if( ($hour >= 0) && ($hour < 12)  )		{			$str = 'AM';		}		else		{			$str = 'PM';		} 						$val = sprintf('%02d:%02d', $hour, $minute);				$val = $val.' '.$str;		if($time == $val)		{			$selected = ' selected ';		}		else		{			$selected = '';		}		$option_str .= '<option value="'.$val.'" '.$selected.' >'.$val.'</option>';	} 	return $option_str;} public function getMealQuantityOptions($breakfast_quantity){		$option_str = '';				if($breakfast_quantity == '1')	{		$sel = ' selected ';	}	else	{		$sel = '';	}		$option_str .= '<option value="1" '.$sel.'>1</option>';			if($breakfast_quantity == '1/4')	{		$sel = ' selected ';	}	else	{		$sel = '';	}	$option_str .= '<option value="1/4" '.$sel.'>1/4</option>';		if($breakfast_quantity == '1/3')	{		$sel = ' selected ';	}	else	{		$sel = '';	}	$option_str .= '<option value="1/3" '.$sel.'>1/3</option>';		if($breakfast_quantity == '1/2')	{		$sel = ' selected ';	}	else	{		$sel = '';	}	$option_str .= '<option value="1/2" '.$sel.'>1/2</option>';															if($breakfast_quantity == '2')	{		$sel = ' selected ';	}	else	{		$sel = '';	}	$option_str .= '<option value="2" '.$sel.'>2</option>';		if($breakfast_quantity == '2/3')	{		$sel = ' selected ';	}	else	{		$sel = '';	}	$option_str .= '<option value="2/3" '.$sel.'>2/3</option>';																												for($j=3;$j<=1000;$j++) 	{		if($breakfast_quantity == $j)		{			$sel = ' selected ';		}		else		{			$sel = '';		}				$option_str .= '<option value="'.$j.'" '.$sel.'>'.$j.'</option>';	}	return $option_str;}public function getMealLikeOptions($breakfast_meal_like){		$arr_food_like = array('Like','Dislike','Favourite','Allergic');	$option_str = '';					for($i=0;$i<count($arr_food_like);$i++)	{		if($breakfast_meal_like == $arr_food_like[$i])		{			$sel = ' selected ';		}		else		{			$sel = '';		}				$option_str .= '<option value="'.$arr_food_like[$i].'" '.$sel.'>'.$arr_food_like[$i].'</option>';	}	if($breakfast_meal_like == '')	{		$sel = ' selected ';	}	else	{		$sel = '';	}	$option_str .= '<option value="" '.$sel.'>None</option>';	return $option_str;}public function getDayOfWeekOptions($day_of_week){        $option_str = '';        $arr_day_of_week = array (        1 => 'Sunday',        2 => 'Monday',        3 => 'Tuesday',        4 => 'Wednesday',        5 => 'Thursday',        6 => 'Friday',        7 => 'Saturday'    );    foreach($arr_day_of_week as $k => $v )    {            if($k == $day_of_week)            {                $selected = ' selected ';            }            else            {                $selected = '';            }            $option_str .= '<option value="'.$k.'" '.$selected.' >'.$v.'</option>';    }	    return $option_str;}public function getDayOfWeekOptionsMultiple($day_of_week){        $option_str = '';        $arr_day_of_week = array (        1 => 'Sunday',        2 => 'Monday',        3 => 'Tuesday',        4 => 'Wednesday',        5 => 'Thursday',        6 => 'Friday',        7 => 'Saturday'    );    foreach($arr_day_of_week as $k => $v )    {            if(in_array($k ,$day_of_week))            {                $selected = ' selected ';            }            else            {                $selected = '';            }            $option_str .= '<option value="'.$k.'" '.$selected.' >'.$v.'</option>';    }	    return $option_str;}public function getDayOfWeekCommastr($str_day_of_week){        $option_str = '';        $arr_day_of_week = array (        1 => 'Sunday',        2 => 'Monday',        3 => 'Tuesday',        4 => 'Wednesday',        5 => 'Thursday',        6 => 'Friday',        7 => 'Saturday'    );        $day_of_week = explode(',', $str_day_of_week);    if(is_array($day_of_week) && count($day_of_week) > 0)    {        foreach($arr_day_of_week as $k => $v )        {            if(in_array($k ,$day_of_week))            {                $option_str .= $v.',';            }        }        $option_str = substr($option_str, 0 ,-1);    }        return $option_str;}public function getMonthsOptionsMultiple($arr_month){        $option_str = '';        $arr_record = array (        1 => 'January',        2 => 'February',        3 => 'March',        4 => 'April',        5 => 'May',        6 => 'June',        7 => 'July',        8 => 'August',        9 => 'September',        10 => 'October',        11 => 'November',        12 => 'December'    );    foreach($arr_record as $k => $v )    {            if(in_array($k ,$arr_month))            {                $selected = ' selected ';            }            else            {                $selected = '';            }            $option_str .= '<option value="'.$k.'" '.$selected.' >'.$v.'</option>';    }	    return $option_str;}public function getMonthsCommastr($str_month){        $option_str = '';        $arr_record = array (        1 => 'January',        2 => 'February',        3 => 'March',        4 => 'April',        5 => 'May',        6 => 'June',        7 => 'July',        8 => 'August',        9 => 'September',        10 => 'October',        11 => 'November',        12 => 'December'    );        $arr_month = explode(',', $str_month);    if(is_array($arr_month) && count($arr_month) > 0)    {        foreach($arr_record as $k => $v )        {            if(in_array($k ,$arr_month))            {                $option_str .= $v.',';            }        }        $option_str = substr($option_str, 0 ,-1);    }       return $option_str;}    public function getModuleWiseCriteriaScaleValues($report_module,$module_criteria,$criteria_scale_range,$start_criteria_scale_value,$end_criteria_scale_value){    $my_DBH = new mysqlConnection();    $DBH = $my_DBH->raw_handle();    $DBH->beginTransaction();        $obj = new ProfileCustomization();    $option_str = '';    if($criteria_scale_range == '')    {        $div_start_criteria_scale_value = 'none';        $div_end_criteria_scale_value = 'none';        $start_criteria_scale_value = '';        $end_criteria_scale_value = '';    }    elseif($criteria_scale_range == '6')    {        $div_start_criteria_scale_value = '';        $div_end_criteria_scale_value = '';        $option_str .= '<span class="Header_brown"><strong>Criteria Value:</strong>&nbsp;&nbsp;&nbsp;</span>';    }    else    {        $div_start_criteria_scale_value = '';        $div_end_criteria_scale_value = 'none';        $end_criteria_scale_value = '';        $option_str .= '<span class="Header_brown"><strong>Criteria Value:</strong>&nbsp;&nbsp;&nbsp;</span>';    }             if($module_criteria == '1' || $module_criteria == '2' || $module_criteria == '9')    {        $option_str .= '<span id="div_start_criteria_scale_value" style="display:'.$div_start_criteria_scale_value.'">                        <select name="start_criteria_scale_value" id="start_criteria_scale_value" style="width:50px;">                        ';        for($i=1;$i<=10;$i++)        {            if($i == $start_criteria_scale_value)            {                $sel = ' selected ';            }            else            {                $sel = '';            }		            $option_str .= '<option value="'.$i.'" '.$sel.'>'.$i.'</option>';        }            $option_str .= '</select></span>';                $option_str .= '<span id="div_end_criteria_scale_value" style="display:'.$div_end_criteria_scale_value.'">                        &nbsp; - &nbsp;                        <select name="end_criteria_scale_value" id="end_criteria_scale_value" style="width:50px;">                        ';        for($i=1;$i<=10;$i++)        {            if($i == $end_criteria_scale_value)            {                $sel = ' selected ';            }            else            {                $sel = '';            }		            $option_str .= '<option value="'.$i.'" '.$sel.'>'.$i.'</option>';        }            $option_str .= '</select></span>';    }    elseif($module_criteria == '4' )    {        $option_str .= '<span id="div_start_criteria_scale_value" style="display:'.$div_start_criteria_scale_value.'">';        $option_str .= '<select name="start_criteria_scale_value" id="start_criteria_scale_value" style="width:100px;">                        ';        $option_str .= $obj->getTimeOptions(0,24,$start_criteria_scale_value);        $option_str .= '</select>';        $option_str .= '</span>';                $option_str .= '<span id="div_end_criteria_scale_value" style="display:'.$div_end_criteria_scale_value.'">                        &nbsp; - &nbsp;';        $option_str .= '<select name="end_criteria_scale_value" id="end_criteria_scale_value" style="width:100px;">                        ';        $option_str .= $obj->getTimeOptions(0,24,$end_criteria_scale_value);        $option_str .= '</select>';        $option_str .= '</span>';    }    elseif($module_criteria == '5' )    {        $option_str .= '<span id="div_start_criteria_scale_value" style="display:'.$div_start_criteria_scale_value.'">';        $option_str .= '<select name="start_criteria_scale_value" id="start_criteria_scale_value" style="width:100px;">                        ';        $option_str .= $obj->getMealQuantityOptions($start_criteria_scale_value);        $option_str .= '</select>';        $option_str .= '</span>';                $option_str .= '<span id="div_end_criteria_scale_value" style="display:'.$div_end_criteria_scale_value.'">                        &nbsp; - &nbsp;';        $option_str .= '<select name="end_criteria_scale_value" id="end_criteria_scale_value" style="width:100px;">                        ';        $option_str .= $obj->getMealQuantityOptions($end_criteria_scale_value);        $option_str .= '</select>';        $option_str .= '</span>';    }    elseif($module_criteria == '6' )    {        $option_str .= '<span id="div_start_criteria_scale_value" style="display:'.$div_start_criteria_scale_value.'">';        $option_str .= '<select name="start_criteria_scale_value" id="start_criteria_scale_value" style="width:100px;">                        ';        $option_str .= $obj->getMealLikeOptions($start_criteria_scale_value);        $option_str .= '</select>';        $option_str .= '</span>';                $option_str .= '<span id="div_end_criteria_scale_value" style="display:'.$div_end_criteria_scale_value.'">';        $option_str .= '<input type="hidden" name="end_criteria_scale_value" id="end_criteria_scale_value" value="'.$end_criteria_scale_value.'">';        $option_str .= '</span>';    }    elseif($module_criteria == '7' )    {        $option_str .= '<span id="div_start_criteria_scale_value" style="display:'.$div_start_criteria_scale_value.'">';        $option_str .= '<select name="start_criteria_scale_value" id="start_criteria_scale_value" style="width:100px;">                        ';        $option_str .= $obj->getDayOfWeekOptions($start_criteria_scale_value);        $option_str .= '</select>';        $option_str .= '</span>';                $option_str .= '<span id="div_end_criteria_scale_value" style="display:'.$div_end_criteria_scale_value.'">&nbsp; - &nbsp';        $option_str .= '<select name="end_criteria_scale_value" id="end_criteria_scale_value" style="width:100px;">                        ';        $option_str .= $obj->getDayOfWeekOptions($end_criteria_scale_value);        $option_str .= '</select>';        $option_str .= '</span>';    }    elseif($module_criteria == '3')    {        $option_str .= '<span id="div_start_criteria_scale_value" style="display:'.$div_start_criteria_scale_value.'">                        <input style="width:50px;" maxlength="3" type="text" name="start_criteria_scale_value" id="start_criteria_scale_value" value="'.$start_criteria_scale_value.'"> (Mins)</span>';                $option_str .= '<span id="div_end_criteria_scale_value" style="display:'.$div_end_criteria_scale_value.'">&nbsp; - &nbsp;                        <input style="width:50px;" maxlength="3" type="text" name="end_criteria_scale_value" id="end_criteria_scale_value" value="'.$end_criteria_scale_value.'"> (Mins)</span>';    }    elseif($module_criteria == '8')    {        $option_str .= '<span id="div_start_criteria_scale_value" style="display:'.$div_start_criteria_scale_value.'">                        <input style="width:50px;" maxlength="4" type="text" name="start_criteria_scale_value" id="start_criteria_scale_value" value="'.$start_criteria_scale_value.'"></span>';                $option_str .= '<span id="div_end_criteria_scale_value" style="display:'.$div_end_criteria_scale_value.'">&nbsp; - &nbsp;                        <input style="width:50px;" maxlength="4" type="text" name="end_criteria_scale_value" id="end_criteria_scale_value" value="'.$end_criteria_scale_value.'"></span>';    }    else    {        $option_str .= '<span id="div_start_criteria_scale_value" style="display:'.$div_start_criteria_scale_value.'">                        <input type="hidden" name="start_criteria_scale_value" id="start_criteria_scale_value" value="'.$start_criteria_scale_value.'"></span>';                $option_str .= '<span id="div_end_criteria_scale_value" style="display:'.$div_end_criteria_scale_value.'">                        <input type="hidden" name="end_criteria_scale_value" id="end_criteria_scale_value" value="'.$end_criteria_scale_value.'"></span>';    }          return $option_str;}        public function getTriggerCriteriaOptionsPCM($trigger_criteria){	 $my_DBH = new mysqlConnection();         $DBH = $my_DBH->raw_handle();         $DBH->beginTransaction();	$option_str = '';                            $sql = "SELECT * FROM `tblbodymainsymptoms` WHERE `bms_status` = '1' AND `bms_deleted` = '0' ORDER BY bms_name";            //echo '<br>'.$sql;              $STH = $DBH->prepare($sql);               $STH->execute();            if($STH->rowCount() > 0)            {                while($row = $STH->fetch(PDO::FETCH_ASSOC))                 {                    $chk_val = 'bms_'.$row['bms_id'];                    if($chk_val == $trigger_criteria )                    {                        $sel = ' selected ';                    }                    else                    {                        $sel = '';                    }		                    $option_str .= '<option value="'.$chk_val.'" '.$sel.'>'.stripslashes($row['bms_name']).'</option>';                }            }                                           $sql = "SELECT * FROM `tbladdictions` WHERE `status` = '1' ORDER BY situation";            //echo '<br>'.$sql;             $STH = $DBH->prepare($sql);             $STH->execute();            if($STH->rowCount() > 0)            {                while($row = $STH->fetch(PDO::FETCH_ASSOC))                 {                    $chk_val = 'adct_'.$row['adct_id'];                    if($chk_val == $trigger_criteria )                    {                        $sel = ' selected ';                    }                    else                    {                        $sel = '';                    }		                    $option_str .= '<option value="'.$chk_val.'" '.$sel.'>'.stripslashes($row['situation']).'</option>';                }            }                                    $sql = "SELECT * FROM `tblsleeps` WHERE `status` = '1' ORDER BY situation";            //echo '<br>'.$sql;              $STH = $DBH->prepare($sql);               $STH->execute();            if($STH->rowCount() > 0)            {                while($row = $STH->fetch(PDO::FETCH_ASSOC))                 {                    $chk_val = 'sleep_'.$row['sleep_id'];                    if($chk_val == $trigger_criteria )                    {                        $sel = ' selected ';                    }                    else                    {                        $sel = '';                    }		                    $option_str .= '<option value="'.$chk_val.'" '.$sel.'>'.stripslashes($row['situation']).'</option>';                }            }                                    $sql = "SELECT * FROM `tblgeneralstressors` WHERE `status` = '1' ORDER BY situation";            //echo '<br>'.$sql;              $STH = $DBH->prepare($sql);              $STH->execute();            if($STH->rowCount() > 0)            {                while($row = $STH->fetch(PDO::FETCH_ASSOC))                 {                    $chk_val = 'gs_'.$row['gs_id'];                    if($chk_val == $trigger_criteria )                    {                        $sel = ' selected ';                    }                    else                    {                        $sel = '';                    }		                    $option_str .= '<option value="'.$chk_val.'" '.$sel.'>'.stripslashes($row['situation']).'</option>';                }            }                                    $sql = "SELECT * FROM `tblworkandenvironments` WHERE `status` = '1' ORDER BY situation";            //echo '<br>'.$sql;              $STH = $DBH->prepare($sql);              $STH->execute();            if($STH->rowCount() > 0)            {                while($row = $STH->fetch(PDO::FETCH_ASSOC))                 {                    $chk_val = 'wae_'.$row['wae_id'];                    if($chk_val == $trigger_criteria )                    {                        $sel = ' selected ';                    }                    else                    {                        $sel = '';                    }		                    $option_str .= '<option value="'.$chk_val.'" '.$sel.'>'.stripslashes($row['situation']).'</option>';                }            }                	            $sql = "SELECT * FROM `tblmycommunications` WHERE `status` = '1' ORDER BY situation";            //echo '<br>'.$sql;              $STH = $DBH->prepare($sql);              $STH->execute();            if($STH->rowCount() > 0)            {                while($row = $STH->fetch(PDO::FETCH_ASSOC))                 {                    $chk_val = 'mc_'.$row['mc_id'];                    if($chk_val == $trigger_criteria )                    {                        $sel = ' selected ';                    }                    else                    {                        $sel = '';                    }		                    $option_str .= '<option value="'.$chk_val.'" '.$sel.'>'.stripslashes($row['situation']).'</option>';                }            }                                   $sql = "SELECT * FROM `tblmyrelations` WHERE `status` = '1' ORDER BY situation";            //echo '<br>'.$sql;              $STH = $DBH->prepare($sql);               $STH->execute();            if($STH->rowCount() > 0)            {                while($row = $STH->fetch(PDO::FETCH_ASSOC))                 {                    $chk_val = 'mr_'.$row['mr_id'];                    if($chk_val == $trigger_criteria )                    {                        $sel = ' selected ';                    }                    else                    {                        $sel = '';                    }		                    $option_str .= '<option value="'.$chk_val.'" '.$sel.'>'.stripslashes($row['situation']).'</option>';                }            }                                    $sql = "SELECT * FROM `tblmajorlifeevents` WHERE `status` = '1' ORDER BY situation";            //echo '<br>'.$sql;              $STH = $DBH->prepare($sql);               $STH->execute();            if($STH->rowCount() > 0)            {                while($row = $STH->fetch(PDO::FETCH_ASSOC))                 {                    $chk_val = 'mle_'.$row['mle_id'];                    if($chk_val == $trigger_criteria )                    {                        $sel = ' selected ';                    }                    else                    {                        $sel = '';                    }		                    $option_str .= '<option value="'.$chk_val.'" '.$sel.'>'.stripslashes($row['situation']).'</option>';                }            }                                       return $option_str;}        public function getModuleWiseCriteriaScaleOptionsPCM($report_module='',$module_criteria='',$criteria_scale_range='')    {        $option_str = '';        //echo 'module_criteria = '.$module_criteria;        if($module_criteria == '6')        {            $arr_scale_range = array (                5 => '=(Equal)'            );        }           elseif($module_criteria == '7')        {            $arr_scale_range = array (                5 => '=(Equal)',                6 => 'Range'            );        }         else        {            $arr_scale_range = array (                1 => '<(Less Than)',                2 => '>(Greater Than)',                3 => ' &le; (Less than or Equal to)',                4 => ' &ge; (Greater than or Equal to)',                5 => '=(Equal)',                6 => 'Range'            );        }        foreach($arr_scale_range as $k => $v )        {            if($k == $criteria_scale_range)            {                $selected = ' selected ';            }            else            {                $selected = '';            }            $option_str .= '<option value="'.$k.'" '.$selected.' >'.$v.'</option>';        }	        return $option_str;    }                    public function getProfileCustomizationDetails($prct_id)    {        $my_DBH = new mysqlConnection();        $DBH = $my_DBH->raw_handle();        $DBH->beginTransaction();        $arr_record = array();                $sql = "SELECT * FROM `tblprofilecustomization` WHERE `prct_id` = '".$prct_id."' AND `deleted` = '0' ";          $STH = $DBH->prepare($sql);           $STH->execute();        if($STH->rowCount() > 0)        {            $row = $STH->fetch(PDO::FETCH_ASSOC);            $arr_record[] = $row;         }        return $arr_record;    }        public function getModuleIdOfProfileCustomization($prct_id)    {        $my_DBH = new mysqlConnection();        $DBH = $my_DBH->raw_handle();        $DBH->beginTransaction();        $module_id = 0;                $sql = "SELECT * FROM `tblprofilecustomization` WHERE `prct_id` = '".$prct_id."' AND `deleted` = '0' ";          $STH = $DBH->prepare($sql);          $STH->execute();        if($STH->rowCount() > 0)        {            $row = $STH->fetch(PDO::FETCH_ASSOC);            $module_id = $row['module_id'];         }        return $module_id;    }           public function updateProfileCustomization($module_criteria,$module_id,$prct_add_more_id,$keywords,$fav_cat_type_id,$fav_cat_id,$prct_id,$status,$prct_ref_no,$prct_cat_id,$listing_date_type,$days_of_month,$single_date,$start_date,$end_date,$scale_range,$start_scale_value,$end_scale_value,$criteria_scale_range,$start_criteria_scale_value,$end_criteria_scale_value,$days_of_week,$months,$user_country_id,$user_state_id,$user_city_id,$user_place_id,$user_gender,$user_food_option,$user_height1,$user_height2,$user_weight1,$user_weight2,$user_age1,$user_age2,$user_bmi1,$user_bmi2,$pro_user_country_id,$pro_user_state_id,$pro_user_city_id,$pro_user_place_id,$pro_user_gender,$pro_user_age1,$pro_user_age2,$pro_user_service)    {        $my_DBH = new mysqlConnection();        $DBH = $my_DBH->raw_handle();        $DBH->beginTransaction();        $return=false;        $sql = "UPDATE `tblprofilecustomization` SET "                . "`prct_ref_no` = '".addslashes($prct_ref_no)."' , "                . "`prct_cat_id` = '".addslashes($prct_cat_id)."' , "                . "`listing_date_type` = '".addslashes($listing_date_type)."' , "                . "`days_of_month` = '".addslashes($days_of_month)."', "                . "`single_date` = '".addslashes($single_date)."', "                . "`start_date` = '".addslashes($start_date)."', "                . "`end_date` = '".addslashes($end_date)."', "                . "`days_of_week` = '".addslashes($days_of_week)."', "                . "`months` = '".addslashes($months)."', "                . "`keyword_scale_type` = '".addslashes($scale_range)."', "                . "`keyword_scale_value1` = '".addslashes($start_scale_value)."', "                . "`keyword_scale_value2` = '".addslashes($end_scale_value)."', "                . "`criteria_id` = '".addslashes($module_criteria)."', "                . "`criteria_scale_type` = '".addslashes($criteria_scale_range)."', "                . "`criteria_scale_value1` = '".addslashes($start_criteria_scale_value)."', "                . "`criteria_scale_value2` = '".addslashes($end_criteria_scale_value)."', "                . "`user_gender` = '".addslashes($user_gender)."', "                . "`user_country_id` = '".addslashes($user_country_id)."', "                . "`user_state_id` = '".addslashes($user_state_id)."', "                . "`user_city_id` = '".addslashes($user_city_id)."', "                . "`user_place_id` = '".addslashes($user_place_id)."', "                . "`user_height1` = '".addslashes($user_height1)."', "                . "`user_height2` = '".addslashes($user_height2)."', "                . "`user_weight1` = '".addslashes($user_weight1)."', "                . "`user_weight2` = '".addslashes($user_weight2)."', "                . "`user_age1` = '".addslashes($user_age1)."', "                . "`user_age2` = '".addslashes($user_age2)."', "                . "`user_bmi1` = '".addslashes($user_bmi1)."', "                . "`user_bmi2` = '".addslashes($user_bmi2)."', "                . "`user_food_option` = '".addslashes($user_food_option)."', "                . "`pro_user_gender` = '".addslashes($pro_user_gender)."', "                . "`pro_user_country_id` = '".addslashes($pro_user_country_id)."', "                . "`pro_user_state_id` = '".addslashes($pro_user_state_id)."', "                . "`pro_user_city_id` = '".addslashes($pro_user_city_id)."', "                . "`pro_user_place_id` = '".addslashes($pro_user_place_id)."', "                . "`pro_user_age1` = '".addslashes($pro_user_age1)."', "                . "`pro_user_age2` = '".addslashes($pro_user_age2)."', "                . "`pro_user_service` = '".addslashes($pro_user_service)."', "                . "`status` = '".addslashes($status)."' "                . "WHERE `prct_id` = '".$prct_id."'";        //echo $sql;                 $STH = $DBH->prepare($sql);          $STH->execute();                    if($module_id == '45')            {              $keywords_id = $this->getInterpretationnaebyidVivek($keywords);            }            else if($module_id == '12')            {              $keywords_id = $this->getDailyActivityNamebyidVivek($keywords);            }            else if($module_id == '13')            {              $keywords_id = $this->getDailyMealsNamebyidVivek($keywords);            }//        $keywords_id = $this->getInterpretationnaebyidVivek($keywords);        $sql1 = "UPDATE `tbl_profile_customization_add_more` SET `end_criteria_scale_value` = '".$end_criteria_scale_value."',`start_scale_value` = '".$start_scale_value."',`end_scale_value` = '".$end_scale_value."',`criteria_scale_range` = '".$criteria_scale_range."',`start_criteria_scale_value` = '".$start_criteria_scale_value."',`module_id` = '".$module_id."',`module_criteria` = '".$module_criteria."',`scale_range` = '".$scale_range."',`keywords` = '".$keywords_id."',`fav_cat_type_id` = '".$fav_cat_type_id."',`fav_cat_id` = '".$fav_cat_id."' WHERE `prct_add_more_id` = '".$prct_add_more_id."'";       $STH = $DBH->prepare($sql1);        $STH->execute();		if($STH->rowCount() > 0)		{			$return = true;		}		return $return;    }                           public function deleteProfileCustomization($prct_id)    {        $my_DBH = new mysqlConnection();        $DBH = $my_DBH->raw_handle();        $DBH->beginTransaction();        $sql = "UPDATE `tbl_profile_customization_add_more` SET `deleted` = '1' WHERE `prct_add_more_id` = '".$prct_id."'";          $STH = $DBH->prepare($sql);          $STH->execute();        if($STH->rowCount() > 0)		{			$return = true;		}		return $return;    }    public function getKeywordScaleValueStr($keyword_scale_type,$keyword_scale_value1,$keyword_scale_value2)    {        $output = 'All';                if($keyword_scale_type == '1')        {            $output = '<(Less Than) '.$keyword_scale_value1;        }        elseif($keyword_scale_type == '2')        {            $output = '>(Greater Than) '.$keyword_scale_value1;        }        elseif($keyword_scale_type == '3')        {            $output = '&le; (Less than or Equal to) '.$keyword_scale_value1;        }        elseif($keyword_scale_type == '4')        {            $output = '&ge; (Greater than or Equal to) '.$keyword_scale_value1;        }        elseif($keyword_scale_type == '5')        {            $output = '=(Equal) '.$keyword_scale_value1;        }        elseif($keyword_scale_type == '6')        {            $output = '(Range) '.$keyword_scale_value1.' - '.$keyword_scale_value2;        }                return $output;    }        public function getMinAndMaxKeywordScaleValue($keyword_scale_type,$keyword_scale_value1,$keyword_scale_value2)    {        $keyword_scale_value1 = intval($keyword_scale_value1);        $keyword_scale_value2 = intval($keyword_scale_value2);                        $min_value = 0;        $max_value = 10;                if($keyword_scale_type == '1')        {            $min_value = 0;            if($keyword_scale_value1 > 0)            {                $max_value = $keyword_scale_value1 - 1;            }            else            {                $max_value = 0;            }                    }        elseif($keyword_scale_type == '2')        {            //echo '<br>keyword_scale_value1 = '.$keyword_scale_value1;            if($keyword_scale_value1 < 10)            {                                $min_value = $keyword_scale_value1 + 1;                $max_value = 10;            }            else            {                $min_value = 0;                $max_value = 0;            }        }        elseif($keyword_scale_type == '3')        {            $min_value = 0;            $max_value = $keyword_scale_value1;                    }        elseif($keyword_scale_type == '4')        {            $min_value = $keyword_scale_value1;            $max_value = 10;        }        elseif($keyword_scale_type == '5')        {            $min_value = $keyword_scale_value1;            $max_value = $keyword_scale_value1;        }        elseif($keyword_scale_type == '6')        {            $temp_min_value = min($keyword_scale_value1,$keyword_scale_value2);            $temp_max_value = max($keyword_scale_value1,$keyword_scale_value2);            $min_value = $temp_min_value;            $max_value = $temp_max_value;        }                return array($min_value,$max_value);    }        public function getCriteriaScaleValueStr($keyword_scale_type,$keyword_scale_value1,$keyword_scale_value2)    {        $output = 'All';                if($keyword_scale_type == '1')        {            $output = '<(Less Than) '.$keyword_scale_value1;        }        elseif($keyword_scale_type == '2')        {            $output = '>(Greater Than) '.$keyword_scale_value1;        }        elseif($keyword_scale_type == '3')        {            $output = '&le; (Less than or Equal to) '.$keyword_scale_value1;        }        elseif($keyword_scale_type == '4')        {            $output = '&ge; (Greater than or Equal to) '.$keyword_scale_value1;        }        elseif($keyword_scale_type == '5')        {            $output = '=(Equal) '.$keyword_scale_value1;        }        elseif($keyword_scale_type == '6')        {            $output = '(Range) '.$keyword_scale_value1.' - '.$keyword_scale_value2;        }                return $output;    }                public function getKeywordName($solution_id,$solution_type)    {        $my_DBH = new mysqlConnection();        $DBH = $my_DBH->raw_handle();        $DBH->beginTransaction();        $name = '';                if($solution_id == '0')        {           $name = 'All';         }        else        {            if($solution_type == 'bms')            {                $sql = "SELECT * FROM `tblbodymainsymptoms` WHERE `bms_id` = '".$solution_id."' ";                  $STH = $DBH->prepare($sql);                   $STH->execute();                if($STH->rowCount() > 0)                {                    $row = $STH->fetch(PDO::FETCH_ASSOC);                     $name = stripslashes($row['bms_name']);                }            }             elseif($solution_type == 'adct')            {                $sql = "SELECT * FROM `tbladdictions` WHERE `adct_id` = '".$solution_id."'";                  $STH = $DBH->prepare($sql);                   $STH->execute();                if($STH->rowCount() > 0)                {                    $row = $STH->fetch(PDO::FETCH_ASSOC);                     $name = stripslashes($row['situation']);                }            }            elseif($solution_type == 'sleep')            {                $sql = "SELECT * FROM `tblsleeps` WHERE `sleep_id` = '".$solution_id."'";                  $STH = $DBH->prepare($sql);                   $STH->execute();                if($STH->rowCount() > 0)                {                    $row = $STH->fetch(PDO::FETCH_ASSOC);                     $name = stripslashes($row['situation']);                }            }            elseif($solution_type == 'gs')            {                $sql = "SELECT * FROM `tblgeneralstressors` WHERE `gs_id` = '".$solution_id."'";                  $STH = $DBH->prepare($sql);                   $STH->execute();                if($STH->rowCount() > 0)                {                    $row = $STH->fetch(PDO::FETCH_ASSOC);                     $name = stripslashes($row['situation']);                }            }            elseif($solution_type == 'wae')            {                $sql = "SELECT * FROM `tblworkandenvironments` WHERE `wae_id` = '".$solution_id."'";                  $STH = $DBH->prepare($sql);                   $STH->execute();                if($STH->rowCount() > 0)                {                    $row = $STH->fetch(PDO::FETCH_ASSOC);                     $name = stripslashes($row['situation']);                }            }            elseif($solution_type == 'mc')            {                $sql = "SELECT * FROM `tblmycommunications` WHERE `mc_id` = '".$solution_id."'";                  $STH = $DBH->prepare($sql);                   $STH->execute();                if($STH->rowCount() > 0)                {                    $row = $STH->fetch(PDO::FETCH_ASSOC);                     $name = stripslashes($row['situation']);                }            }            elseif($solution_type == 'mr')            {                $sql = "SELECT * FROM `tblmyrelations` WHERE `mr_id` = '".$solution_id."'";                  $STH = $DBH->prepare($sql);                   $STH->execute();                if($STH->rowCount() > 0)                {                    $row = $STH->fetch(PDO::FETCH_ASSOC);                     $name = stripslashes($row['situation']);                }            }            elseif($solution_type == 'mle')            {                $sql = "SELECT * FROM `tblmajorlifeevents` WHERE `mle_id` = '".$solution_id."'";                  $STH = $DBH->prepare($sql);                   $STH->execute();                if($STH->rowCount() > 0)                {                    $row = $STH->fetch(PDO::FETCH_ASSOC);                     $name = stripslashes($row['situation']);                }            }            elseif($solution_type == 'meal')            {                $sql = "SELECT * FROM `tbldailymeals` WHERE `meal_id` = '".$solution_id."'";                  $STH = $DBH->prepare($sql);                  $STH->execute();                if($STH->rowCount() > 0)                {                    $row = $STH->fetch(PDO::FETCH_ASSOC);                     $name = stripslashes($row['meal_item']);                }            }            elseif($solution_type == 'activity')            {                $sql = "SELECT * FROM `tbldailyactivity` WHERE `activity_id` = '".$solution_id."'";                  $STH = $DBH->prepare($sql);                   $STH->execute();                if($STH->rowCount() > 0)                {                    $row = $STH->fetch(PDO::FETCH_ASSOC);                     $name = stripslashes($row['activity']);                }            }        }                                return $name;    }        //    vivek start        public function getKeywordNameById($keyword_id)            {                $my_DBH = new mysqlConnection();                $DBH = $my_DBH->raw_handle();                $DBH->beginTransaction();                $meal_item = '';                //$sql = "SELECT * FROM `tblfavcategorytype` WHERE `fav_cat_type_id` = '".$fav_cat_type_id."' ";                $sql = "SELECT * FROM `tblbodymainsymptoms` WHERE `bms_id` = '".$keyword_id."' ";                  $STH = $DBH->prepare($sql);                   $STH->execute();                if($STH->rowCount() > 0)                {                    $row = $STH->fetch(PDO::FETCH_ASSOC);                    $meal_item = stripslashes($row['bms_name']);                }                return $meal_item;            }               public function getProfileCustomizationAddMoreDetails($prct_add_more_id)    {        $my_DBH = new mysqlConnection();        $DBH = $my_DBH->raw_handle();        $DBH->beginTransaction();        $arr_record = array();                $sql = "SELECT * FROM `tbl_profile_customization_add_more` WHERE `prct_add_more_id` = '".$prct_add_more_id."' AND `deleted` = '0' ";          $STH = $DBH->prepare($sql);           $STH->execute();        if($STH->rowCount() > 0)        {            $row = $STH->fetch(PDO::FETCH_ASSOC);            $arr_record = $row;         }        return $arr_record;    }   public function getdailyActivityKeywordDetails()    {        $my_DBH = new mysqlConnection();        $DBH = $my_DBH->raw_handle();        $DBH->beginTransaction();        $arr_record = array();                $sql = "SELECT * FROM `tbldailyactivity` WHERE 1 ";          $STH = $DBH->prepare($sql);          $STH->execute();        if($STH->rowCount() > 0)        {            while($row = $STH->fetch(PDO::FETCH_ASSOC))            {            $arr_record[] = $row['activity'];             }        }        return $arr_record;    }         public function getDailyMealsKeywordDetails()    {        $my_DBH = new mysqlConnection();        $DBH = $my_DBH->raw_handle();        $DBH->beginTransaction();        $arr_record = array();                $sql = "SELECT * FROM `tbldailymeals` WHERE 1 ";          $STH = $DBH->prepare($sql);           $STH->execute();        if($STH->rowCount() > 0)        {            while($row = $STH->fetch(PDO::FETCH_ASSOC))            {            $arr_record[] = $row['meal_item'];             }        }        return $arr_record;    }    public function getDailyMealsNamebyidVivek($keywords)	{            $my_DBH = new mysqlConnection();            $DBH = $my_DBH->raw_handle();            $DBH->beginTransaction();            $return = '';                        $sql = "SELECT * FROM `tbldailymeals` WHERE `meal_item` = '".$keywords."' ";              $STH = $DBH->prepare($sql);              $STH->execute();            if($STH->rowCount() > 0)            {                    $row = $STH->fetch(PDO::FETCH_ASSOC);                    $return = $row['meal_id'];            }            return $return;	}    public function getDailyActivityNamebyidVivek($keywords)	{            $my_DBH = new mysqlConnection();$DBH = $my_DBH->raw_handle();$DBH->beginTransaction();            $return = '';                        $sql = "SELECT * FROM `tbldailyactivity` WHERE `activity` = '".$keywords."' ";              $STH = $DBH->prepare($sql);  $STH->execute();            if($STH->rowCount() > 0)            {                    $row = $STH->fetch(PDO::FETCH_ASSOC);                    $return = $row['activity_id'];            }            return $return;	}public function getAllKeywordFromThreeTableDetails($module_id,$keyword_id)    {//echo $module_id;die();            $my_DBH = new mysqlConnection();            $DBH = $my_DBH->raw_handle();            $DBH->beginTransaction();            $return = '';                        if($module_id =='12')            {            $sql = "SELECT * FROM `tbldailyactivity` WHERE `activity_id` = '".$keyword_id."' ";              $STH = $DBH->prepare($sql);              $STH->execute();            if($STH->rowCount() > 0)            {                    $row = $STH->fetch(PDO::FETCH_ASSOC);                    $return = $row['activity'];            }            }            else if($module_id == '13')            {            $sql = "SELECT * FROM `tbldailymeals` WHERE `meal_id` = '".$keyword_id."' ";              $STH = $DBH->prepare($sql);               $STH->execute();            if($STH->rowCount() > 0)            {                    $row = $STH->fetch(PDO::FETCH_ASSOC);                    $return = $row['meal_item'];            }            }            else if($module_id == '45')            {            $sql = "SELECT * FROM `tblbodymainsymptoms` WHERE `bms_id` = '".$keyword_id."' ";              $STH = $DBH->prepare($sql);              $STH->execute();            if($STH->rowCount() > 0)            {                    $row = $STH->fetch(PDO::FETCH_ASSOC);                    $return = $row['bms_name'];            }            }                        return $return;    }        public function getProfileKeywordDetails()    {        $my_DBH = new mysqlConnection();        $DBH = $my_DBH->raw_handle();        $DBH->beginTransaction();        $arr_record = array();                 $sql = "SELECT * FROM `tbl_profile_customization_add_more` WHERE 1 ";          $STH = $DBH->prepare($sql);           $STH->execute();        if($STH->rowCount() > 0)        {            while($row = $STH->fetch(PDO::FETCH_ASSOC))            {            $arr_record[] = $row['keywords'];             }        }        return $arr_record;    }//    vivek end    }?>